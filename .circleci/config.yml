version: 2
jobs:
  build:
    docker:
      - image: cirrusci/flutter
    steps:
      - checkout
      - run: flutter doctor
      - run: flutter test
      - run:
        name: Code coverage (graphql_flutter)
        command: |
          flutter test --coverage
      - run:
        name: Upload coverage
        command: |
          bash <(curl -s https://codecov.io/bash) -F